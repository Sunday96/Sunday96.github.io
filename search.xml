<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>2020年 vue面试</title>
      <link href="2020/07/31/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/"/>
      <url>2020/07/31/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h2 id="Vue-相关"><a href="#Vue-相关" class="headerlink" title="Vue 相关"></a>Vue 相关</h2><p><img src="http://static.sunday90.com/images/vue.png" class="lazyload" data-srcset="http://static.sunday90.com/images/vue.png" srcset="data:image/png;base64,666" alt="Vue"></p><h3 id="Vue实现数据双向绑定的原理：Object-defineProperty"><a href="#Vue实现数据双向绑定的原理：Object-defineProperty" class="headerlink" title="Vue实现数据双向绑定的原理：Object.defineProperty()"></a>Vue实现数据双向绑定的原理：Object.defineProperty()</h3><ul><li><p>Vue实现数据双向绑定主要是：采用数据劫持结合发布者-订阅者模式的方式，通过 Object.defineProperty() 来劫持各个属性的setter，getter，在数据变动时发布消息给订阅者，触发相应监听回调。当把一个普通 Javascript 对象传给 Vue 实例来作为它的 data 选项时，Vue 将遍历它的属性，用 Object.defineProperty() 将它们转为 getter/setter。用户看不到 getter/setter，但是在内部它们让 Vue 追踪依赖，在属性被访问和修改时通知变化</p></li><li><p>Vue的数据双向绑定 将<code>MVVM</code>作为数据绑定的入口，整合<code>Observer</code>，<code>Compile</code>和<code>Watcher</code>三者，通过<code>Observer</code>来监听自己的<code>model</code>的数据变化，通过<code>Compile</code>来解析编译模板指令（<code>vue</code>中是用来解析 <code>&#123;&#123;&#125;&#125;</code>），最终利用<code>watcher</code>搭起<code>observer</code>和<code>Compile</code>之间的通信桥梁，达到数据变化 —&gt;视图更新；视图交互变化（<code>input</code>）—&gt;数据<code>model</code>变更双向绑定效果</p></li></ul><h3 id="Vue-如何监听-Array的变化"><a href="#Vue-如何监听-Array的变化" class="headerlink" title="Vue 如何监听 Array的变化"></a>Vue 如何监听 Array的变化</h3><ol><li>先获取原生 <code>Array</code> 的原型方法</li><li>使用 Object.defineProperty 拦截 数组的原生操作</li><li>把需要被拦截的 <code>Array</code> 类型的数据原型指向改造后原型</li><li>然后再去做视图的更新等操作</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayProto = <span class="built_in">Array</span>.prototype <span class="comment">// 获取Array的原型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">def</span> (<span class="params">obj, key</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(key); <span class="comment">// 控制台输出 push</span></span><br><span class="line">      <span class="built_in">console</span>.log(args); <span class="comment">// 控制台输出 [Array(2), 7, &quot;hello!&quot;]</span></span><br><span class="line">      <span class="comment">// 获取原生的方法</span></span><br><span class="line">      <span class="keyword">let</span> original = arrayProto[key];</span><br><span class="line">      <span class="comment">// 将开发者的参数传给原生的方法，保证数组按照开发者的想法被改变</span></span><br><span class="line">      <span class="keyword">const</span> result = original.apply(<span class="built_in">this</span>, args);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// do something 比如通知Vue视图进行更新</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;我的数据被改变了，视图该更新啦&#x27;</span>);</span><br><span class="line">      <span class="built_in">this</span>.text = <span class="string">&#x27;hello Vue&#x27;</span>;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 新的原型</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="function"><span class="title">push</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重写赋值</span></span><br><span class="line">def(obj, <span class="string">&#x27;push&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原型的指向重写</span></span><br><span class="line">arr.__proto__ = obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行push</span></span><br><span class="line">arr.push([<span class="number">1</span>, <span class="number">2</span>], <span class="number">7</span>, <span class="string">&#x27;hello!&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="Vue-nextTick有什么作用"><a href="#Vue-nextTick有什么作用" class="headerlink" title="Vue.$nextTick有什么作用"></a>Vue.$nextTick有什么作用</h3><ul><li>当数据更新后 dom 会重新渲染，<code>$nextTick</code>就是为了可以在dom更新后立即拿到最新的dom对象</li></ul><h3 id="vue的优点是什么"><a href="#vue的优点是什么" class="headerlink" title="vue的优点是什么"></a>vue的优点是什么</h3><ul><li>低耦合。视图（<code>View</code>）可以独立于<code>Model</code>变化和修改，一个<code>ViewModel</code>可以绑定到不同的<code>&quot;View&quot;</code>上，当View变化的时候Model可以不变，当<code>Model</code>变化的时候<code>View</code>也可以不变</li><li>可重用性。你可以把一些视图逻辑放在一个<code>ViewModel</code>里面，让很多<code>view</code>重用这段视图逻辑</li><li>可测试。界面素来是比较难于测试的，而现在测试可以针对<code>ViewModel</code>来写</li></ul><h3 id="Vue-组件-data-为什么必须是函数"><a href="#Vue-组件-data-为什么必须是函数" class="headerlink" title="Vue 组件 data 为什么必须是函数"></a>Vue 组件 data 为什么必须是函数</h3><ul><li>每个组件都是 <code>Vue</code> 的实例</li><li>组件共享 <code>data</code> 属性，当 <code>data</code> 的值是同一个引用类型的值时，改变其中一个会影响其它实例</li></ul><h3 id="Virtual-DOM-是什么？作用是什么"><a href="#Virtual-DOM-是什么？作用是什么" class="headerlink" title="Virtual DOM 是什么？作用是什么"></a>Virtual DOM 是什么？作用是什么</h3><p>一棵以 JavaScript 对象( VNode 节点)作为基础的树，用对象属性来描述节点，实际上它只是一层对真实 DOM 的抽象</p><ul><li><p>提供与真实DOM节点所对应的虚拟节点vnode</p></li><li><p>将虚拟节点vnode和旧虚拟节点oldVnode进行对比，然后更新视图</p></li></ul><h3 id="v-for-的时候为什么要加-key"><a href="#v-for-的时候为什么要加-key" class="headerlink" title="v-for 的时候为什么要加 key"></a>v-for 的时候为什么要加 key</h3><p>更新组件时判断两个节点是否相同。相同就复用，不相同就删除旧的创建新的</p><h4 id="不用key"><a href="#不用key" class="headerlink" title="不用key"></a>不用key</h4><ul><li><p><strong>就地复用节点</strong>。在比较新旧两个节点是否是同一个节点的过程中会判断成新旧两个节点是同一个节点，因为 a.key 和 b.key 都是 undefined。所以不会重新创建节点和删除节点，只会在节点的属性层面上进行比较和更新。所以可能在某种程度上（创建和删除节点方面）会有渲染性能上的提升；</p></li><li><p><strong>无法维持组件的状态</strong>。由于就地复用节点的关系，可能在维持组件状态方面会导致不可预知的错误，比如无法维持改组件的动画效果、开关等状态；</p></li></ul><h4 id="用key"><a href="#用key" class="headerlink" title="用key"></a>用key</h4><ul><li><strong>维持组件的状态，保证组件的复用</strong>。因为有 key 唯一标识了组件，不会在每次比较新旧两个节点是否是同一个节点的时候直接判断为同一个节点，而是会继续在接下来的节点中找到 key 相同的节点去比较，能找到相同的 key 的话就复用节点，不能找到的话就增加或者删除节点。</li><li><strong>查找性能上的提升</strong>。有 key 的时候，会生成 hash，这样在查找的时候就是 hash 查找了，基本上就是 O(1) 的复杂度</li><li><strong>节点复用带来的性能提升</strong>。因为有 key 唯一标识了组件，所以会尽可能多的对组件进行复用（尽管组件顺序不同），那么创建和删除节点数量就会变少，这方面的消耗就会下降，带来性能的提升。</li></ul><h3 id="Vue-和-React-的diff算法的区别"><a href="#Vue-和-React-的diff算法的区别" class="headerlink" title="Vue 和 React 的diff算法的区别"></a>Vue 和 React 的diff算法的区别</h3><p>vue和react的diff算法，都是忽略跨级比较，只做同级比较。vue diff时调动patch函数，参数是vnode和oldVnode，分别代表新旧节点。</p><ul><li>vue比对节点，当节点元素类型相同，但是className不同，认为是不同类型元素，删除重建，而react会认为是同类型节点，只是修改节点属性</li><li>vue的列表比对，采用从两端到中间的比对方式，而react则采用从左到右依次比对的方式。当一个集合，只是把最后一个节点移动到了第一个，react会把前面的节点依次移动，而vue只会把最后一个节点移动到第一个。总体上，vue的对比方式更高效</li></ul><h3 id="Vue-与-Angular-以及-React的区别"><a href="#Vue-与-Angular-以及-React的区别" class="headerlink" title="Vue 与 Angular 以及 React的区别"></a>Vue 与 Angular 以及 React的区别</h3><ol><li>与AngularJS的区别<br>相同点：<br>都支持指令：内置指令和自定义指令；都支持过滤器：内置过滤器和自定义过滤器；都支持双向数据绑定；都不支持低端浏览器<br>不同点：<br>AngularJS的学习成本高，比如增加了Dependency Injection特性，而Vue.js本身提供的API都比较简单、直观；在性能上，AngularJS依赖对数据做脏检查，所以Watcher越多越慢；Vue.js使用基于依赖追踪的观察并且使用异步队列更新，所有的数据都是独立触发的</li><li>与React的区别<br>相同点：<br>React采用特殊的JSX语法，Vue.js在组件开发中也推崇编写.vue特殊文件格式，对文件内容都有一些约定，两者都需要编译后使用；中心思想相同：一切都是组件，组件实例之间可以嵌套；都提供合理的钩子函数，可以让开发者定制化地去处理需求；都不内置列数AJAX，Route等功能到核心包，而是以插件的方式加载；在组件开发中都支持mixins的特性<br>不同点：<br> React采用的Virtual DOM会对渲染出来的结果做脏检查；Vue.js在模板中提供了指令，过滤器等，可以非常方便，快捷地操作Virtual DOM</li></ol><h2 id="JS-基础"><a href="#JS-基础" class="headerlink" title="JS 基础"></a>JS 基础</h2><h3 id="JS-基本类型有哪些？引用类型有哪些"><a href="#JS-基本类型有哪些？引用类型有哪些" class="headerlink" title="JS 基本类型有哪些？引用类型有哪些"></a>JS 基本类型有哪些？引用类型有哪些</h3><p>基本类型  存放在<strong>栈内存</strong>中，占据固定大小的空间</p><ul><li>string</li><li>number</li><li>null</li><li>boolean</li><li>symbol</li><li>undefined</li></ul><p>引用类型  保存在<strong>堆内存</strong>中</p><ul><li>function</li><li>object</li><li>array</li></ul><h3 id="介绍下-浅拷贝-深拷贝"><a href="#介绍下-浅拷贝-深拷贝" class="headerlink" title="介绍下 浅拷贝 深拷贝"></a>介绍下 浅拷贝 深拷贝</h3><h3 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h3><p>只赋值引用，没有赋值真正的值</p><h3 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h3><p>重新创建对象 切断 引用</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @ts-expect-error</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepcoyp</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Record</span>&lt;<span class="title">string</span>, <span class="title">any</span>&gt;&gt;(<span class="params">origin: T, target?: T = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> k <span class="keyword">in</span> origin) &#123;</span><br><span class="line">    <span class="keyword">if</span> (origin.hasOwnProperty(k)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> origin[k] === <span class="string">&#x27;object&#x27;</span> &amp;&amp; origin[k]) &#123;</span><br><span class="line">        <span class="comment">// @ts-expect-error</span></span><br><span class="line">        target[k] = origin[k] <span class="keyword">instanceof</span> <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">        deepcoyp(origin[k], target[k]);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        target[k] = origin[k];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="JS-高级"><a href="#JS-高级" class="headerlink" title="JS 高级"></a>JS 高级</h2><p><img src="http://static.sunday90.com/images/6288755792019456.jpeg" class="lazyload" data-srcset="http://static.sunday90.com/images/6288755792019456.jpeg" srcset="data:image/png;base64,666" alt="javascript"></p><h3 id="prototype-和-proto-的区别"><a href="#prototype-和-proto-的区别" class="headerlink" title="prototype 和__proto__的区别"></a>prototype 和__proto__的区别</h3><ul><li><p>prototype 是函数的属性 【原型】</p></li><li><p>__proto__ 是每个对象拥有的属性 指向 构造函数原型</p></li></ul><blockquote><p>提示：__proto__ 该特性已经从 Web 标准中删除 应该使用 <code>Object.getPrototypeOf()</code> 来获取对象的原型</p></blockquote><h3 id="Javascript-new一个对象的时候，内部发生了什么"><a href="#Javascript-new一个对象的时候，内部发生了什么" class="headerlink" title="Javascript new一个对象的时候，内部发生了什么"></a>Javascript new一个对象的时候，内部发生了什么</h3><ul><li>创建一个空的简单JavaScript对象（即<code>&#123;&#125;</code>）</li><li>链接该对象（即设置该对象的构造函数）到另一个对象 </li><li>将步骤1新创建的对象作为<code>this</code>的上下文 </li><li>如果该函数没有返回对象，则返回<code>this</code></li></ul><h3 id="Object-create实现了什么？传null得到的结果和普通对象有什么区别"><a href="#Object-create实现了什么？传null得到的结果和普通对象有什么区别" class="headerlink" title="Object.create实现了什么？传null得到的结果和普通对象有什么区别"></a>Object.create实现了什么？传null得到的结果和普通对象有什么区别</h3><blockquote><p>创建一个新对象，使用现有的对象来提供新创建的对象的 __proto__<br>得到一个 没有任何原型的对象，因为 null 是顶层对象 没有原型</p></blockquote><h3 id="import和require的区别"><a href="#import和require的区别" class="headerlink" title="import和require的区别"></a>import和require的区别</h3><blockquote><p>node编程中最重要的思想就是模块化，<code>import</code>和<code>require</code>都是被模块化所使用</p></blockquote><ol><li>出现的时间、地点不同<br>require/exports 是社区产生的模块规范 2009年<br>import/export 是 JS标准化模块规范 2015年</li><li>require/exports 是运行时动态加载，import/export 是静态编译<br>CommonJS 加载的是一个对象（即 module.exports 属性），该对象只有在脚本运行完才会生成。而 ES6 模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成 require/exports 输出的是一个值的拷贝，import/export 模块输出的是值的引用</li><li>用法不一致</li></ol><h3 id="防抖节流，它们两个之间的区别是什么"><a href="#防抖节流，它们两个之间的区别是什么" class="headerlink" title="防抖节流，它们两个之间的区别是什么"></a>防抖节流，它们两个之间的区别是什么</h3><ul><li>函数防抖（debounce）：当持续触发事件时，一定时间段内没有再触发事件，事件处理函数才会执行一次，如果设定的时间到来之前，又一次触发了事件，就重新开始延时</li><li>函数节流（throttle）当持续触发事件时，保证一定时间段内只调用一次事件处理函数</li></ul><h3 id="说说你对闭包的理解"><a href="#说说你对闭包的理解" class="headerlink" title="说说你对闭包的理解"></a>说说你对闭包的理解</h3><p>闭包的优点是可以避免全局变量的污染；缺点是闭包会常驻内存，增加内存使用量，使用不当很容易造成内存泄漏。在JavaScript中，函数即闭包，只有函数才会产生作用域</p><blockquote><p>闭包有3个特性：</p></blockquote><ul><li>函数嵌套函数</li><li>在函数内部可以引用外部的参数和变量</li><li>参数和变量不会以垃圾回收机制回收</li></ul><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p><img src="http://static.sunday90.com/images/Banner-Blog-1A-1.jpg" class="lazyload" data-srcset="http://static.sunday90.com/images/Banner-Blog-1A-1.jpg" srcset="data:image/png;base64,666" alt="algorithm"></p><h3 id="构建二叉树"><a href="#构建二叉树" class="headerlink" title="构建二叉树"></a>构建二叉树</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> root: <span class="literal">null</span> | Node = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">insert</span>(<span class="params">key: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> node = <span class="keyword">new</span> Node(key);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.root) &#123;</span><br><span class="line">      <span class="built_in">this</span>.insertNode(<span class="built_in">this</span>.root, node);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.root = node;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="title">insertNode</span>(<span class="params">node: Node, newNode: Node</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 节点值 小于 根节点 插入左边  反之 插入右边</span></span><br><span class="line">    <span class="keyword">if</span> (newNode.key &lt; node.key) &#123;</span><br><span class="line">      <span class="comment">// 插入前 判断当前node 是否为空 是 生成节点 否则 继续 insertNode</span></span><br><span class="line">      <span class="keyword">if</span> (node.left === <span class="literal">null</span>) &#123;</span><br><span class="line">        node.left = newNode;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.insertNode(node.left, newNode);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (node.right === <span class="literal">null</span>) &#123;</span><br><span class="line">        node.right = newNode;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.insertNode(node.right, newNode);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="翻转二叉树"><a href="#翻转二叉树" class="headerlink" title="翻转二叉树"></a>翻转二叉树</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 翻转二叉树</span></span><br><span class="line"><span class="comment"> * 递归翻转</span></span><br><span class="line"><span class="comment"> * 先判断 节点是否为空</span></span><br><span class="line"><span class="comment"> * 首先 先 暂存 左右子节点</span></span><br><span class="line"><span class="comment"> * 赋值 左右右节点 = 暂存右左节点;</span></span><br><span class="line"><span class="comment"> * 递归 左右节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span> </span>&#123;</span><br><span class="line">  <span class="comment">// more...</span></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="title">reverseNode</span>(<span class="params">node: Node | <span class="literal">null</span></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> tempLeft = node.left;</span><br><span class="line">    <span class="keyword">const</span> tempRight = node.right;</span><br><span class="line"></span><br><span class="line">    node.right = tempLeft;</span><br><span class="line">    <span class="built_in">this</span>.reverseNode(node.right);</span><br><span class="line"></span><br><span class="line">    node.left = tempRight;</span><br><span class="line">    <span class="built_in">this</span>.reverseNode(node.left);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="title">reverse</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.reverseNode(<span class="built_in">this</span>.root);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="随机生成指定长度数组-且-值-唯一（洗牌算法）"><a href="#随机生成指定长度数组-且-值-唯一（洗牌算法）" class="headerlink" title="随机生成指定长度数组 且 值 唯一（洗牌算法）"></a>随机生成指定长度数组 且 值 唯一（洗牌算法）</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 洗牌</span></span><br><span class="line"><span class="comment"> * 先生成指定长度数组，随后填充1-x值</span></span><br><span class="line"><span class="comment"> * 再 排序 利用 (Math.random() &gt; 0.5 ? -1 : 1) 来随机排序</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">size</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">domain</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shuffle</span>(<span class="params">size: <span class="built_in">number</span>, domain: <span class="built_in">number</span>[]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [min, max] = domain;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>(max)</span><br><span class="line">    .fill(<span class="number">0</span>)</span><br><span class="line">    .map(<span class="function">(<span class="params">_, i</span>) =&gt;</span> i + <span class="number">1</span>)</span><br><span class="line">    .sort(<span class="function">() =&gt;</span> (<span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span> ? -<span class="number">1</span> : <span class="number">1</span>))</span><br><span class="line">    .filter(<span class="function"><span class="params">v</span> =&gt;</span> v &lt;= max &amp;&amp; v &gt;= min)</span><br><span class="line">    .slice(<span class="number">0</span>, size);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="两数之和"><a href="#两数之和" class="headerlink" title="两数之和"></a>两数之和</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 两数之和</span></span><br><span class="line"><span class="comment"> * 利用堆 存储 已经遍历过的下标和值</span></span><br><span class="line"><span class="comment"> * 下标做 key 值 value  nums = &#123;0: xxx&#125;;</span></span><br><span class="line"><span class="comment"> * 循环一次</span></span><br><span class="line"><span class="comment"> * 从 nums 获取 当前下标的值  curNum = nums[0]</span></span><br><span class="line"><span class="comment"> * target - curNum 得到 key</span></span><br><span class="line"><span class="comment"> * 如果 curNum[key] 不为 undefined 即 得到 另外一个 数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@export</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">target</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">twoSum</span>(<span class="params">nums: <span class="built_in">number</span>[], target: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> prevNums: Record&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123;&#125;; <span class="comment">// 存放出现过的数字，和对应的索引</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="comment">// 遍历每一项</span></span><br><span class="line">    <span class="keyword">const</span> curNum = nums[i]; <span class="comment">// 当前项</span></span><br><span class="line">    <span class="keyword">const</span> targetNum = target - curNum; <span class="comment">// 希望从过去的数字中找到的呼应项</span></span><br><span class="line">    <span class="keyword">const</span> targetNumIndex = prevNums[targetNum]; <span class="comment">// 在prevNums中找targetNum的索引</span></span><br><span class="line">    <span class="keyword">if</span> (targetNumIndex !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> [targetNumIndex, i]; <span class="comment">// 直接返回targetNumIndex和当前的i</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果找不到，说明之前没出现过targetNum</span></span><br><span class="line">    prevNums[curNum] = i; <span class="comment">// 往prevNums存当前curNum和对应的i</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 利用 filter indexOf</span></span><br><span class="line"><span class="comment"> * indexOf 返回第一次找到的元素下标，如果下标跟返回的下标不一致说明重复</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@export</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@template <span class="variable">T</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;T[]&#125;</span> <span class="variable">arr</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">unique3</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">number</span>&gt;(<span class="params">arr: T[]</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">&#x27;unique3&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> result: T[] = arr.filter(<span class="function">(<span class="params">item, index</span>) =&gt;</span> arr.indexOf(item, <span class="number">0</span>) === index);</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">&#x27;unique3&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="数组排序"><a href="#数组排序" class="headerlink" title="数组排序"></a>数组排序</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 选择排序</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description </span>首先从原始数组中找到最小的元素，并把该元素放在数组的最前面，然后再从剩下的元素中寻找最小的元素，放在之前最小元素的后面，知道排序完毕。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@export</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">arr</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">selectSort2</span>(<span class="params">arr: <span class="built_in">number</span>[]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> minIndex = <span class="number">0</span>,</span><br><span class="line">    temp;</span><br><span class="line">  <span class="keyword">const</span> length = arr.length;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    minIndex = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; length; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[j] &lt; arr[minIndex]) &#123;</span><br><span class="line">        <span class="comment">// 找到 最小值 index</span></span><br><span class="line">        minIndex = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    temp = arr[i];</span><br><span class="line">    arr[i] = arr[minIndex];</span><br><span class="line">    arr[minIndex] = temp;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="JS-中的广度与深度优先遍历"><a href="#JS-中的广度与深度优先遍历" class="headerlink" title="JS 中的广度与深度优先遍历"></a>JS 中的广度与深度优先遍历</h3><blockquote><p>深度优先</p></blockquote><p><img src="http://static.sunday90.com/images/20180705160341166.png" class="lazyload" data-srcset="http://static.sunday90.com/images/20180705160341166.png" srcset="data:image/png;base64,666" alt="deepTraversal"></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 深度遍历</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">node</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deepTraversal</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Node</span>&gt;(<span class="params">node: T</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(node);</span><br><span class="line">  <span class="keyword">if</span> (node.childNodes) &#123;</span><br><span class="line">    <span class="built_in">Array</span>.prototype.forEach.call(node.childNodes, <span class="function">(<span class="params">item: T</span>) =&gt;</span> &#123;</span><br><span class="line">      deepTraversal(item);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>广度优先</p></blockquote><p><img src="http://static.sunday90.com/images/20180705155854774.png" class="lazyload" data-srcset="http://static.sunday90.com/images/20180705155854774.png" srcset="data:image/png;base64,666" alt="breadthTraversal"></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 广度优先</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@export</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@template <span class="variable">T</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;T&#125;</span> <span class="variable">node</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">breadthTraversal</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Node</span>&gt;(<span class="params">node: T</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> queue: T[] = [];</span><br><span class="line">  queue.unshift(node);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (queue.length) &#123;</span><br><span class="line">    <span class="keyword">const</span> childrenItem = queue.pop()!;</span><br><span class="line">    <span class="built_in">console</span>.log(childrenItem);</span><br><span class="line">    <span class="keyword">const</span> childrenList: T[] = <span class="built_in">Array</span>.prototype.slice.call(childrenItem.childNodes, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; childrenList.length; i++) &#123;</span><br><span class="line">      queue.push(childrenList[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h2><p><img src="http://static.sunday90.com/images/QQ20200718-003403@2x.png" class="lazyload" data-srcset="http://static.sunday90.com/images/QQ20200718-003403@2x.png" srcset="data:image/png;base64,666" alt="webpack"></p><h3 id="你都用过哪些webpack的配置"><a href="#你都用过哪些webpack的配置" class="headerlink" title="你都用过哪些webpack的配置"></a>你都用过哪些webpack的配置</h3><ul><li><code>mode</code> 模式</li><li><code>entry</code> 入口</li><li><code>output</code> 出口 文件名 路径配置</li><li><code>resolve</code> extensions 可被解析的 文件后缀  alias 别名</li><li><code>externals</code> 外部依赖</li><li><code>module</code> 配置 模块解析</li></ul><h3 id="plugin和loader的区别"><a href="#plugin和loader的区别" class="headerlink" title="plugin和loader的区别"></a>plugin和loader的区别</h3><ol><li>loader 用于加载解析某些资源文件<br>例如 把.ts 编译成 js，把小图片转换成 base64，把.scss 编译成 css 等等，只针对转化文件</li><li>plugin 用于扩展webpack的功能<br>它直接作用于 webpack，扩展了它的功能。当然loader也是变相的扩展了 webpack ，但是它只专注于转化文件（transform）这一个领域。而plugin的功能更加的丰富，而不仅局限于资源的加载<br>例如 定义环境变量，压缩js css 等等，开启 dev-server</li></ol><h3 id="用过哪些loader、plugin"><a href="#用过哪些loader、plugin" class="headerlink" title="用过哪些loader、plugin"></a>用过哪些loader、plugin</h3><p><strong>loader</strong></p><ul><li>vue-loader</li><li>ts-loader</li><li>sass-loader</li><li>vue-style-loader</li><li>style-loader</li><li>postcss-loader</li></ul><p><strong>plugin</strong></p><ul><li>html-webpack-plugin  结合 webpack-dev-server</li><li>mini-css-extract-plugin 把css 输出成css 文件</li><li>uglifyjs-webpack-plugin 把 压缩css / js 文件</li></ul><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><p><img src="http://static.sunday90.com/images/http1.jpeg" class="lazyload" data-srcset="http://static.sunday90.com/images/http1.jpeg" srcset="data:image/png;base64,666" alt="http1"></p><h3 id="谈谈你对http协议的认识"><a href="#谈谈你对http协议的认识" class="headerlink" title="谈谈你对http协议的认识"></a>谈谈你对http协议的认识</h3><p>http协议是基于一种请求/响应模式的、无状态的、应用层的协议，基于TCP协议传输数据，支持客户/服务器模式，每次完整交互都包含HTTP请求和HTTP响应。</p><p>Http请求由三个部分组成，请求行、消息报头、请求正文（可选，为空也行）</p><p>请求方法主要包括：GET、POST、HEAD、PUT、DELETE… GET：请求获取Request-URI所标识的资源 POST：在Request-URI所标识的资源后附加新的数据（body）</p><p>每种方法规定了客户与服务器联系的类型不同，由于http协议简单，使得http服务器的程序规模小，因而通信速度快</p><h3 id="HTTP-Request-Header-请求头"><a href="#HTTP-Request-Header-请求头" class="headerlink" title="HTTP Request Header 请求头"></a>HTTP Request Header 请求头</h3><ul><li><strong>Accept:</strong> 允许哪些媒体类型</li><li><strong>Accept-Charset:</strong> 允许哪些字符集</li><li><strong>Accept-Encoding:</strong> 允许哪些编码</li><li><strong>Accept-Language:</strong> 允许哪些语言</li><li><strong>Cache-Control:</strong> 缓存策略，如no-cache 如max-age:100</li><li><strong>Connection:</strong> 连接选项，例如是否允许代理</li><li><strong>Host:</strong> 请求的主机</li><li><strong>Referer:</strong> 表明这个请求发起的源头</li></ul><h3 id="HTTP-Responses-Header-响应头"><a href="#HTTP-Responses-Header-响应头" class="headerlink" title="HTTP Responses Header 响应头"></a>HTTP Responses Header 响应头</h3><ul><li><strong>Accept-Ranges：</strong>表明服务器是否支持指定范围请求及哪种类型的分段请求</li><li><strong>Age：</strong>从原始服务器到代理缓存形成的估算时间（以秒计，非负）</li><li><strong>Allow：</strong>对某网络资源的有效的请求行为，不允许则返回405</li><li><strong>Cache-Control：</strong>告诉所有的缓存机制是否可以缓存及哪种类型</li><li><strong>Content-Encodingweb：</strong>服务器支持的返回内容压缩编码类型</li><li><strong>Content-Language：</strong>响应体的语言</li><li><strong>Content-Length：</strong>响应体的长度</li><li><strong>Content-Type：</strong>返回内容的MIME类型</li><li><strong>Expires：</strong>响应过期的日期和时间</li></ul><h3 id="HTTP状态码有哪些？代表什么意思"><a href="#HTTP状态码有哪些？代表什么意思" class="headerlink" title="HTTP状态码有哪些？代表什么意思"></a>HTTP状态码有哪些？代表什么意思</h3><p>HTTP状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字没有分类的作用。HTTP状态码共分为5种类型：</p><table><thead><tr><th align="left">分类</th><th align="left">分类描述</th></tr></thead><tbody><tr><td align="left">1**</td><td align="left">信息，服务器收到请求，需要请求者继续执行操作</td></tr><tr><td align="left">2**</td><td align="left">成功，操作被成功接收并处理</td></tr><tr><td align="left">3**</td><td align="left">重定向，需要进一步的操作以完成请求</td></tr><tr><td align="left">4**</td><td align="left">客户端错误，请求包含语法错误或无法完成请求</td></tr><tr><td align="left">5**</td><td align="left">服务器错误，服务器在处理请求的过程中发生了错误</td></tr></tbody></table><p>HTTP状态码列表:</p><table><thead><tr><th align="left">状态码</th><th align="left">状态码英文名称</th><th>中文描述</th></tr></thead><tbody><tr><td align="left">100</td><td align="left">Continue</td><td>继续。客户端应继续其请求</td></tr><tr><td align="left">101</td><td align="left">Switching Protocols</td><td>切换协议。服务器根据客户端的请求切换协议。只能切换到更高级的协议，例如，切换到HTTP的新版本协议</td></tr><tr><td align="left"></td><td align="left"></td><td></td></tr><tr><td align="left">200</td><td align="left">OK</td><td>请求成功。一般用于GET与POST请求</td></tr><tr><td align="left">201</td><td align="left">Created</td><td>已创建。成功请求并创建了新的资源</td></tr><tr><td align="left">202</td><td align="left">Accepted</td><td>已接受。已经接受请求，但未处理完成</td></tr><tr><td align="left">203</td><td align="left">Non-Authoritative Information</td><td>非授权信息。请求成功。但返回的meta信息不在原始的服务器，而是一个副本</td></tr><tr><td align="left">204</td><td align="left">No Content</td><td>无内容。服务器成功处理，但未返回内容。在未更新网页的情况下，可确保浏览器继续显示当前文档</td></tr><tr><td align="left">205</td><td align="left">Reset Content</td><td>重置内容。服务器处理成功，用户终端（例如：浏览器）应重置文档视图。可通过此返回码清除浏览器的表单域</td></tr><tr><td align="left">206</td><td align="left">Partial Content</td><td>部分内容。服务器成功处理了部分GET请求</td></tr><tr><td align="left"></td><td align="left"></td><td></td></tr><tr><td align="left">300</td><td align="left">Multiple Choices</td><td>多种选择。请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于用户终端（例如：浏览器）选择</td></tr><tr><td align="left">301</td><td align="left">Moved Permanently</td><td>永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替</td></tr><tr><td align="left">302</td><td align="left">Found</td><td>临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI</td></tr><tr><td align="left">303</td><td align="left">See Other</td><td>查看其它地址。与301类似。使用GET和POST请求查看</td></tr><tr><td align="left">304</td><td align="left">Not Modified</td><td>未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源</td></tr><tr><td align="left">305</td><td align="left">Use Proxy</td><td>使用代理。所请求的资源必须通过代理访问</td></tr><tr><td align="left">306</td><td align="left">Unused</td><td>已经被废弃的HTTP状态码</td></tr><tr><td align="left">307</td><td align="left">Temporary Redirect</td><td>临时重定向。与302类似。使用GET请求重定向</td></tr><tr><td align="left"></td><td align="left"></td><td></td></tr><tr><td align="left">400</td><td align="left">Bad Request</td><td>客户端请求的语法错误，服务器无法理解</td></tr><tr><td align="left">401</td><td align="left">Unauthorized</td><td>请求要求用户的身份认证</td></tr><tr><td align="left">402</td><td align="left">Payment Required</td><td>保留，将来使用</td></tr><tr><td align="left">403</td><td align="left">Forbidden</td><td>服务器理解请求客户端的请求，但是拒绝执行此请求</td></tr><tr><td align="left">404</td><td align="left">Not Found</td><td>服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置”您所请求的资源无法找到”的个性页面</td></tr><tr><td align="left">405</td><td align="left">Method Not Allowed</td><td>客户端请求中的方法被禁止</td></tr><tr><td align="left">406</td><td align="left">Not Acceptable</td><td>服务器无法根据客户端请求的内容特性完成请求</td></tr><tr><td align="left">407</td><td align="left">Proxy Authentication Required</td><td>请求要求代理的身份认证，与401类似，但请求者应当使用代理进行授权</td></tr><tr><td align="left">408</td><td align="left">Request Time-out</td><td>服务器等待客户端发送的请求时间过长，超时</td></tr><tr><td align="left">409</td><td align="left">Conflict</td><td>服务器完成客户端的 PUT 请求时可能返回此代码，服务器处理请求时发生了冲突</td></tr><tr><td align="left">410</td><td align="left">Gone</td><td>客户端请求的资源已经不存在。410不同于404，如果资源以前有现在被永久删除了可使用410代码，网站设计人员可通过301代码指定资源的新位置</td></tr><tr><td align="left">411</td><td align="left">Length Required</td><td>服务器无法处理客户端发送的不带Content-Length的请求信息</td></tr><tr><td align="left">412</td><td align="left">Precondition Failed</td><td>客户端请求信息的先决条件错误</td></tr><tr><td align="left">413</td><td align="left">Request Entity Too Large</td><td>由于请求的实体过大，服务器无法处理，因此拒绝请求。为防止客户端的连续请求，服务器可能会关闭连接。如果只是服务器暂时无法处理，则会包含一个Retry-After的响应信息</td></tr><tr><td align="left">414</td><td align="left">Request-URI Too Large</td><td>请求的URI过长（URI通常为网址），服务器无法处理</td></tr><tr><td align="left">415</td><td align="left">Unsupported Media Type</td><td>服务器无法处理请求附带的媒体格式</td></tr><tr><td align="left">416</td><td align="left">Requested range not satisfiable</td><td>客户端请求的范围无效</td></tr><tr><td align="left">417</td><td align="left">Expectation Failed</td><td>服务器无法满足Expect的请求头信息</td></tr><tr><td align="left"></td><td align="left"></td><td></td></tr><tr><td align="left">500</td><td align="left">Internal Server Error</td><td>服务器内部错误，无法完成请求</td></tr><tr><td align="left">501</td><td align="left">Not Implemented</td><td>服务器不支持请求的功能，无法完成请求</td></tr><tr><td align="left">502</td><td align="left">Bad Gateway</td><td>作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应</td></tr><tr><td align="left">503</td><td align="left">Service Unavailable</td><td>由于超载或系统维护，服务器暂时的无法处理客户端的请求。延时的长度可包含在服务器的Retry-After头信息中</td></tr><tr><td align="left">504</td><td align="left">Gateway Time-out</td><td>充当网关或代理的服务器，未及时从远端服务器获取请求</td></tr><tr><td align="left">505</td><td align="left">HTTP Version not supported</td><td>服务器不支持请求的HTTP协议的版本，无法完成处理</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> 面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack+ts+es6+vue 配置教程</title>
      <link href="2020/07/17/webpack-ts-es6-vue/"/>
      <url>2020/07/17/webpack-ts-es6-vue/</url>
      
        <content type="html"><![CDATA[<p><img src="http://static.sunday90.com/images/QQ20200718-003403@2x.png" class="lazyload" data-srcset="http://static.sunday90.com/images/QQ20200718-003403@2x.png" srcset="data:image/png;base64,666" alt="webpack"></p><p>之前一直搞不懂webpack，也排斥学习 总是觉得太难了 配置太复杂。。。</p><p>最近一段时间没事写写轮播图玩，传统dom形式是写通了，我想拿到vue, react用呢？</p><a id="more"></a><p>理解webpack如何配置？</p><p>打造自己的组件库？</p><p>那么现在开始吧</p><h2 id="Webpack-的四大核心"><a href="#Webpack-的四大核心" class="headerlink" title="Webpack 的四大核心"></a>Webpack 的四大核心</h2><ul><li>entery 入口源文件</li><li>output 生成文件出口</li><li>loader 进行文件处理</li><li>plugins 插件，比 loader 更强大，能使用更多 webpack 的 api</li></ul><p>下面配置一个 vue + ts + tsx webpack配置【基于v4】</p><h3 id="第一步-配置-入口出口模块"><a href="#第一步-配置-入口出口模块" class="headerlink" title="第一步 配置 入口出口模块"></a>第一步 配置 入口出口模块</h3><p>先把入口出口模块配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: process.env.NODE_ENV,  <span class="comment">// 启用不同类型的 mode 得到的优化效果不一样</span></span><br><span class="line">  devtool: <span class="string">&#x27;source-map&#x27;</span>,  <span class="comment">// webpack serve 运行的时候 添加 source-map</span></span><br><span class="line">  entry: util.resolve(<span class="string">&#x27;src/components/main.ts&#x27;</span>),   <span class="comment">// 入口文件</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&#x27;index.js&#x27;</span>,  <span class="comment">// 打包后的文件名</span></span><br><span class="line">    path: util.resolve(<span class="string">&#x27;dist&#x27;</span>),   <span class="comment">// 输出的目录</span></span><br><span class="line">    publicPath: <span class="string">&#x27;/&#x27;</span>,  <span class="comment">// 结合 HtmlWebpackPlugin 使用，定义资源基准地址</span></span><br><span class="line">    <span class="comment">// chunkFilename: &#x27;[id].js&#x27;,    // 哈希name</span></span><br><span class="line">    libraryTarget: <span class="string">&#x27;umd&#x27;</span>,  <span class="comment">// 打包成什么类型模块 如果打包成 common 模块推荐 commonjs2</span></span><br><span class="line">    library: <span class="string">&#x27;swiper&#x27;</span>,  <span class="comment">// 对外暴露的模块名称</span></span><br><span class="line">    umdNamedDefine: <span class="literal">true</span>,  <span class="comment">// 如果设置了 libraryTarget： &#x27;umd&#x27; 则 需要设置 umdNamedDefine: true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...more</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第二步-配置可以被解析的文件"><a href="#第二步-配置可以被解析的文件" class="headerlink" title="第二步 配置可以被解析的文件"></a>第二步 配置可以被解析的文件</h3><p>配置 可以被解析的文件</p><p>因为我们要支持ts和vue打包，所以 extensions 要加 <code>.vue</code> <code>.ts</code></p><p>再配置一个别名 方便我们 在项目中 import 例如 <code>import xxx form &#39;@/xxxx&#39;</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...more</span></span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>],  <span class="comment">// 可以被解析的文件</span></span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: util.resolve(<span class="string">&#x27;src&#x27;</span>), <span class="comment">// 别名 tsconfig 也同样需要配置一份  详见  tsconfig `paths`选项</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第三步-配置外部资源"><a href="#第三步-配置外部资源" class="headerlink" title="第三步 配置外部资源"></a>第三步 配置外部资源</h3><p>配置 外部资源，这些资源不需要被打包在一起</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...more</span></span><br><span class="line">  externals: [&#123; <span class="attr">vue</span>: <span class="string">&#x27;Vue&#x27;</span> &#125;],  <span class="comment">// 外部已经有的依赖模块 至于为何是 数组 或者对象 字符串 还是自己百度一下实际测试，我说的可能不太对，总的来说是 模块对外暴露的名称 和 模块 名称</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第四步-配置-module"><a href="#第四步-配置-module" class="headerlink" title="第四步 配置 module"></a>第四步 配置 module</h3><p>配置 module</p><p>我们想 打包一个vue + ts/tsx scss 需要用到什么loader？</p><ul><li>vue 肯定要 vue-loader</li><li>ts ts-loader</li><li>scss sass-loader</li></ul><p><em>loader 的执行顺序是 从 <code>右</code> 到 <code>左</code> 切记 loader顺序错误依然不会正确打包</em></p><ul><li>解析 <code>.ts</code> 首先要通过ts-loader 检查ts类型校验 然后 被编译成esnext 模块，babel-loader 再编译成浏览器能处理的js模块和js版本</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...more</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// ...more</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.ts$/i</span>,</span><br><span class="line">        loader: <span class="string">&#x27;babel-loader!ts-loader&#x27;</span>,   <span class="comment">// 处理ts文件 loader 传递loader的名称 ! 代表 多个loader分隔符 简写【猜的。。。】</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>解析 <code>.tsx</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...more</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// ...more</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.tsx$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span> &#125;,  <span class="comment">// ts 处理完后 交给 babel 编译成 普通 js文件 es5版本(根据babel配置)</span></span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">&#x27;ts-loader&#x27;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              appendTsSuffixTo: [<span class="regexp">/\.vue$/</span>], <span class="comment">// 让 ts 支持 .vue 文件处理 敲黑板 这一步不要忘记  场景 .tsx 文件中去引入 .vue组件 引用链接 https://segmentfault.com/a/1190000012024858</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">        exclude: util.resolve(<span class="string">&#x27;node_modules&#x27;</span>),  <span class="comment">// 不处理的目录</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>解析 <code>.scss</code><br>这一步需要先配置 sass-loader 然后<br>交给 postcss-loader 自动添加浏览器前缀<br>再交给 css-loader<br>再 交给 MiniCssExtractPlugin.loader 导出.css 文件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...more</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    <span class="comment">// ...more</span></span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.s[ac]ss$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: MiniCssExtractPlugin.loader,  <span class="comment">// 导出为.css</span></span><br><span class="line">            options: &#123;</span><br><span class="line">              publicPath: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">              hmr: process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>,  <span class="comment">// css 热更新</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;postcss-loader&#x27;</span>,   <span class="comment">// 帮助自动添加浏览器后缀</span></span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              implementation: <span class="built_in">require</span>(<span class="string">&#x27;dart-sass&#x27;</span>),   <span class="comment">// 默认使用的是 node-sass node-sass 下载巨慢。。。 推荐 dart-sass 下载速度还快 </span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="最后奉上-最终配置"><a href="#最后奉上-最终配置" class="headerlink" title="最后奉上 最终配置"></a>最后奉上 最终配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> VueLoaderPlugin = <span class="built_in">require</span>(<span class="string">&#x27;vue-loader/lib/plugin&#x27;</span>);    <span class="comment">// vue-loader 的所有插件 处理template .vue专用 插件</span></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);    <span class="comment">// webpack 加载一个 html 作为 结果展示页</span></span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">&#x27;uglifyjs-webpack-plugin&#x27;</span>);   <span class="comment">// 压缩js</span></span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>);  <span class="comment">// 把 css 文件导出到本地</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;./util&#x27;</span>);   <span class="comment">// 工具包</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@type <span class="type">&#123;import(&#x27;webpack&#x27;).Configuration&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: process.env.NODE_ENV,  <span class="comment">// 启用不同类型的 mode 得到的优化效果不一样</span></span><br><span class="line">  devtool: <span class="string">&#x27;source-map&#x27;</span>,  <span class="comment">// webpack serve 运行的时候 添加 source-map</span></span><br><span class="line">  entry: util.resolve(<span class="string">&#x27;src/components/main.ts&#x27;</span>),   <span class="comment">// 入口文件</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&#x27;index.js&#x27;</span>,  <span class="comment">// 打包后的文件名</span></span><br><span class="line">    path: util.resolve(<span class="string">&#x27;dist&#x27;</span>),   <span class="comment">// 输出的目录</span></span><br><span class="line">    publicPath: <span class="string">&#x27;/&#x27;</span>,  <span class="comment">// 结合 HtmlWebpackPlugin 使用，定义资源基准地址</span></span><br><span class="line">    <span class="comment">// chunkFilename: &#x27;[id].js&#x27;,    // 哈希name</span></span><br><span class="line">    libraryTarget: <span class="string">&#x27;umd&#x27;</span>,  <span class="comment">// 打包成什么类型模块 如果打包成 common 模块推荐 commonjs2</span></span><br><span class="line">    library: <span class="string">&#x27;swiper&#x27;</span>,  <span class="comment">// 对外暴露的模块名称</span></span><br><span class="line">    umdNamedDefine: <span class="literal">true</span>,  <span class="comment">// 如果设置了 libraryTarget： &#x27;umd&#x27; 则 需要设置 umdNamedDefine: true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>],  <span class="comment">// 可以被解析的文件</span></span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: util.resolve(<span class="string">&#x27;src&#x27;</span>), <span class="comment">// 别名 tsconfig 也同样需要配置一份  详见  tsconfig `paths`选项</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  externals: [&#123; <span class="attr">vue</span>: <span class="string">&#x27;Vue&#x27;</span> &#125;],  <span class="comment">// 外部已经有的依赖模块</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;   <span class="comment">// loader 执行顺序是 从 右 到 左</span></span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.ts$/i</span>,</span><br><span class="line">        loader: <span class="string">&#x27;babel-loader!ts-loader&#x27;</span>,   <span class="comment">// 处理ts文件 loader 传递loader的名称 ! 代表 多个loader分隔符 简写【猜的。。。】</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.tsx$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span> &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">&#x27;ts-loader&#x27;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              appendTsSuffixTo: [<span class="regexp">/\.vue$/</span>], <span class="comment">// 让 ts 支持 .vue 文件处理</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">        exclude: util.resolve(<span class="string">&#x27;node_modules&#x27;</span>),  <span class="comment">// 不处理的目录</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(es6|js|mjs)$/i</span>,</span><br><span class="line">        include: util.resolve(<span class="string">&#x27;src&#x27;</span>),  <span class="comment">// 可以被处理的目录</span></span><br><span class="line">        exclude: util.resolve(<span class="string">&#x27;node_modules&#x27;</span>),</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.vue$/i</span>,</span><br><span class="line">        loader: <span class="string">&#x27;vue-loader&#x27;</span>,     <span class="comment">// .vue 文件 vue-loader 会把他们处理成 .js .css,</span></span><br><span class="line">        options: &#123;                <span class="comment">// 所以 对 于 这种类型文件 需要 再配置 loader</span></span><br><span class="line">          loaders: &#123;</span><br><span class="line">            js: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">            ts: <span class="string">&#x27;babel-loader!ts-loader&#x27;</span>,</span><br><span class="line">            tsx: <span class="string">&#x27;babel-loader!ts-loader&#x27;</span>,   <span class="comment">// 好像这个不需要。。。我没试过  .vue || tsx 只能选一个</span></span><br><span class="line">          &#125;,</span><br><span class="line">          compilerOptions: &#123;</span><br><span class="line">            preserveWhitespace: <span class="literal">false</span>, <span class="comment">// 放弃模板标签之间的空格 详看 https://vue-loader.vuejs.org/zh/options.html#compiler</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [<span class="string">&#x27;css-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.s[ac]ss$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: MiniCssExtractPlugin.loader,  <span class="comment">// 导出为.css</span></span><br><span class="line">            options: &#123;</span><br><span class="line">              publicPath: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">              hmr: process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>,  <span class="comment">// css 热更新</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;postcss-loader&#x27;</span>,   <span class="comment">// 帮助自动添加浏览器后缀</span></span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              implementation: <span class="built_in">require</span>(<span class="string">&#x27;dart-sass&#x27;</span>),   <span class="comment">// 默认使用的是 node-sass node-sass 下载巨慢。。。 推荐 dart-sass 下载速度还快 </span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> VueLoaderPlugin(),</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      <span class="comment">// filename: &#x27;[name].[chunkhash:8].css&#x27;,     // 哈希name `chunkhash` 打包为库之类的不需要哈希，只有实际业务开发打包的文件最好加哈希</span></span><br><span class="line">      <span class="comment">// chunkFilename: &#x27;[id].[chunkhash:8].css&#x27;,</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      title: <span class="string">&#x27;My App&#x27;</span>,</span><br><span class="line">      filename: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">      template: util.resolve(<span class="string">&#x27;public/index.html&#x27;</span>),</span><br><span class="line">      <span class="comment">// inject: &#x27;head&#x27;,    // 把打包后的资源链接 插入到 HTML那个位置</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  stats: <span class="string">&#x27;normal&#x27;</span>,    <span class="comment">// 打包控制台输出的信息 类别</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> UglifyJsPlugin(&#123;</span><br><span class="line">        cache: util.resolve(<span class="string">&#x27;.cache&#x27;</span>),</span><br><span class="line">        parallel: <span class="literal">true</span>,</span><br><span class="line">        sourceMap: <span class="literal">true</span>,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>那么有什么问题 可以留言，请多多指教<img src="http://static.sunday90.com/images/A0Jv0.jpeg" class="lazyload" data-srcset="http://static.sunday90.com/images/A0Jv0.jpeg" srcset="data:image/png;base64,666" alt="A0Jv0"></p>]]></content>
      
      
      <categories>
          
          <category> webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
            <tag> ts </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>科学上网</title>
      <link href="2020/07/09/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
      <url>2020/07/09/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/</url>
      
        <content type="html"><![CDATA[<p>V2Ray是近几年兴起的科学上网技术，采用新的协议，因功能强大、能有效抵抗墙的干扰而广受好评，ssr 已被GFW识别，封禁率高，已不再推荐<br>V2Ray 同时支持 <code>ssr</code> <code>vmess</code> 协议</p><a id="more"></a><h2 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h2><table><thead><tr><th align="left">客户端</th><th align="left">地址</th></tr></thead><tbody><tr><td align="left">Windows</td><td align="left"><a href="https://github.com/2dust/v2rayN/releases">V2rayN</a></td></tr><tr><td align="left">Mac</td><td align="left"><a href="https://github.com/Cenmrev/V2RayX/releases">V2rayX</a></td></tr><tr><td align="left">Android</td><td align="left"><a href="https://github.com/2dust/v2rayNG/releases">V2rayNG</a></td></tr><tr><td align="left">IOS</td><td align="left">Shadowrocket（需要注册非大陆AppleID，或者购买）需要付费</td></tr></tbody></table><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="V2rayN"><a href="#V2rayN" class="headerlink" title="V2rayN"></a>V2rayN</h3><ul><li>下载 &amp; 解压 v2rayN-Core.zip v2rayN.zip</li><li>双击运行 <code>v2rayN.exe</code></li><li>配置vmess服务器 可以从剪贴板 导入</li><li>最后启动 选择 pac模式 或者 全局模式</li></ul><hr><ol><li>下载<ul><li>copy v2rayN-Core 下的所有文件到 v2rayN<img src="http://static.sunday90.com/images/v2rayN-1.jpg" class="lazyload" data-srcset="http://static.sunday90.com/images/v2rayN-1.jpg" srcset="data:image/png;base64,666" width="80%"/></li></ul></li></ol><img src="http://static.sunday90.com/images/v2rayN-2.jpg" class="lazyload" data-srcset="http://static.sunday90.com/images/v2rayN-2.jpg" srcset="data:image/png;base64,666" width="80%"/><ol><li><p>配置</p><ul><li>双击运行 <code>v2rayN.exe</code></li><li>单击 v2ray 图标 点击服务器 从剪贴板批量导入链接<img src="http://static.sunday90.com/images/v2rayN-3.jpg" class="lazyload" data-srcset="http://static.sunday90.com/images/v2rayN-3.jpg" srcset="data:image/png;base64,666" width="80%"/><img src="http://static.sunday90.com/images/v2rayN-4.jpg" class="lazyload" data-srcset="http://static.sunday90.com/images/v2rayN-4.jpg" srcset="data:image/png;base64,666" width="80%"/></li></ul></li><li><p>启动</p><ul><li>右击 v2ray 图标 服务-&gt; 启动pac<img src="http://static.sunday90.com/images/v2rayN-5.jpg" class="lazyload" data-srcset="http://static.sunday90.com/images/v2rayN-5.jpg" srcset="data:image/png;base64,666"></li></ul></li></ol><h3 id="V2rayX"><a href="#V2rayX" class="headerlink" title="V2rayX"></a>V2rayX</h3><ul><li>下载后 拖到 <code>application</code> 应用程序文件夹内</li><li>双击运行，如果有弹出安全策略不允许运行，请打开系统偏好设置 -&gt; 安全与隐私 仍然打开</li><li>然后 点击桌面上方 v2rayX图标 -&gt; Configure -&gt; import other links <em>（导入vmess://xxx类型链接）</em></li><li>最重要一步 v2rayX图标 -&gt;  load core 启动服务</li></ul><ol><li>安装<ul><li>下载后 <code>application</code> 应用程序文件夹内</li><li>双击运行，如果有弹出安全策略不允许运行，请打开系统偏好设置 -&gt; 安全与隐私 仍然打开</li><li>点击 install</li></ul></li></ol><img src="http://static.sunday90.com/images/v2ray-2@2x.png" class="lazyload" data-srcset="http://static.sunday90.com/images/v2ray-2@2x.png" srcset="data:image/png;base64,666" width="80%" /><ol start="2"><li>配置<ul><li>Configure</li><li>一般建议选择 pac mode，匹配规则，规则内网站走代理，其他直连</li><li>global mode 全局模式，所有网站走代理（这里全局仅仅是针对浏览网页）</li><li>Manual mode 直连模式，所有网站不走代理</li></ul></li></ol><img src="http://static.sunday90.com/images/v2ray-3@2x.png" class="lazyload" data-srcset="http://static.sunday90.com/images/v2ray-3@2x.png" srcset="data:image/png;base64,666" width="80%" /><ol start="3"><li>配置服务器<ul><li>import other links</li></ul></li></ol><img src="http://static.sunday90.com/images/v2ray-4@2x.png" class="lazyload" data-srcset="http://static.sunday90.com/images/v2ray-4@2x.png" srcset="data:image/png;base64,666" width="80%" /><img src="http://static.sunday90.com/images/v2ray-5@2x.png" class="lazyload" data-srcset="http://static.sunday90.com/images/v2ray-5@2x.png" srcset="data:image/png;base64,666" width="80%" /><ol start="4"><li>最后一步 load core</li></ol><img src="http://static.sunday90.com/images/v2ray-6@2x.png" class="lazyload" data-srcset="http://static.sunday90.com/images/v2ray-6@2x.png" srcset="data:image/png;base64,666" width="80%" /><h3 id="V2rayNG"><a href="#V2rayNG" class="headerlink" title="V2rayNG"></a>V2rayNG</h3><ul><li>暂无安卓设备，参考以上配置即可</li></ul><h3 id="Shadowrocket"><a href="#Shadowrocket" class="headerlink" title="Shadowrocket"></a>Shadowrocket</h3><blockquote><p>支持的协议很多 ssr、vmess、trojan</p></blockquote><ul><li>需要切换非中国大陆AppleID下载安装，可以在 某宝 某多 买到帐号</li><li>copy vmess://xxx 链接 进入 Shadowrocket 会自动提示你 是否导入</li><li>切换节点 然后 开启 服务就行了</li></ul>]]></content>
      
      
      <categories>
          
          <category> 科学上网 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> v2ray </tag>
            
            <tag> 小飞机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dom-tips</title>
      <link href="2020/07/05/tips/"/>
      <url>2020/07/05/tips/</url>
      
        <content type="html"><![CDATA[<p>时常看别人博客添加了各种效果，有些好奇 想自己实现一个，今天就来实现一个 点击 页面 弹出 一个tips块</p><a id="more"></a><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TipsOptions &#123;</span><br><span class="line">  messages: <span class="built_in">string</span> | <span class="built_in">string</span>[];</span><br><span class="line">  className?: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Tips</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> className?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> messages: <span class="built_in">string</span>[];</span><br><span class="line">  <span class="keyword">public</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">options: TipsOptions</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.messages = options.messages <span class="keyword">instanceof</span> <span class="built_in">Array</span> ? options.messages : [options.messages];</span><br><span class="line">    <span class="built_in">this</span>.className = options.className;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> render(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">const</span> messageLength = <span class="built_in">this</span>.messages.length;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event: MouseEvent</span>) </span>&#123;</span><br><span class="line">      self.count++;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> el = <span class="built_in">this</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">      <span class="comment">// el.innerText = self.messages[self.count % messageLength];</span></span><br><span class="line">      el.innerText = self.messages[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * messageLength)];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (self.className) &#123;</span><br><span class="line">        el.classList.add(self.className);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      el.style.maxWidth = <span class="string">&#x27;60px&#x27;</span>;</span><br><span class="line">      el.style.color = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">      el.style.cursor = <span class="string">&#x27;default&#x27;</span>;</span><br><span class="line">      el.style.userSelect = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">      el.style.opacity = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">      el.style.transitionDuration = <span class="string">&#x27;200ms&#x27;</span>;</span><br><span class="line">      el.style.position = <span class="string">&#x27;absolute&#x27;</span>;</span><br><span class="line">      el.style.top = event.pageY + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">this</span>.body.appendChild(el);</span><br><span class="line"></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">      * 水平 点击 位置居中</span></span><br><span class="line"><span class="comment">      * offsetWidth 必须要等元素插入dom中后才能获取到</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      el.style.left = event.pageX - el.offsetWidth / <span class="number">2</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log(event.pageX, el.style.left, el.offsetWidth, event.pageX - el.offsetWidth / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 等待 前面执行栈执行完毕 立即插入任务队列</span></span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        el.style.opacity = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">        <span class="comment">// 垂直浮动 最高 50px 距离</span></span><br><span class="line">        el.style.transform = <span class="string">`translateY(<span class="subst">$&#123;-<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">50</span>)&#125;</span>px)`</span>;</span><br><span class="line">      &#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        el.style.opacity = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="comment">// 过渡动画 是 200ms 故 延时200 移除dom</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.body.removeChild(el);</span><br><span class="line">        &#125;, <span class="number">200</span>);</span><br><span class="line">      &#125;, <span class="number">3000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果<br><img src="http://static.sunday90.com/images/20200705172533.gif" class="lazyload" data-srcset="http://static.sunday90.com/images/20200705172533.gif" srcset="data:image/png;base64,666" alt="效果"><br>完工</p>]]></content>
      
      
      
        <tags>
            
            <tag> dom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>element-form resetFields 与 Vue $nextTick</title>
      <link href="2019/10/07/element-form/"/>
      <url>2019/10/07/element-form/</url>
      
        <content type="html"><![CDATA[<p>公司之前一个管理后台做好了，拿给客户演示后，提了新的需求，url传递参数 页面自动显示 action form 表单，且 form表单内数据是传递来的参数</p><p>想了下这个需求很简单，router传递参数吗 easy,</p><p>mounted 后 把 query的参数 赋值到 form</p><a id="more"></a><blockquote><p>本示例模拟 参数已经从url拿到</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisible = true&quot;</span>&gt;</span>点击打开 Dialog<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  &lt;el-dialog</span><br><span class="line">    title=&quot;提示&quot;</span><br><span class="line">    :visible.sync=&quot;dialogVisible&quot;</span><br><span class="line">    width=&quot;30%&quot;</span><br><span class="line">    @closed=&quot;closed&quot;&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;审批人&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;审批人&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;活动区域&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;form.region&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;活动区域&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;区域一&quot;</span> <span class="attr">value</span>=<span class="string">&quot;shanghai&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;区域二&quot;</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisible = false&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Main = &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      form: &#123;</span><br><span class="line">        user: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        region: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      dialogVisible: <span class="literal">false</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.dialogVisible = <span class="literal">true</span></span><br><span class="line">      <span class="built_in">this</span>.form.user = <span class="string">&#x27;55555&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">closed</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$refs.form.resetFields()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Ctor = Vue.extend(Main)</span><br><span class="line"><span class="keyword">new</span> Ctor().$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>这样么错吧</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.dialogVisible = <span class="literal">true</span></span><br><span class="line"><span class="built_in">this</span>.form.user = <span class="string">&#x27;55555&#x27;</span></span><br></pre></td></tr></table></figure><p>但是 关闭的时候 重置form 的时候，无法清空 值 <a href="https://codepen.io/SundayNine/pen/MWWaxdB">在线地址</a>，不管你输入什么 关闭后还是 我们在 mounted 赋的新值 5555</p><p>我百思不得琪姐</p><p>忽然灵光一闪</p><p><code>this.$nextTick</code> 没错就是它了</p><p>来理解一下 <a href="https://cn.vuejs.org/v2/api/#Vue-nextTick">Vue.$nextTick</a></p><blockquote><p>在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改数据</span></span><br><span class="line">vm.msg = <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line"><span class="comment">// DOM 还没有更新</span></span><br><span class="line">Vue.nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// DOM 更新了</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为一个 Promise 使用 (2.1.0 起新增，详见接下来的提示)</span></span><br><span class="line">Vue.nextTick().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// DOM 更新了</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>为何数据修改后没有立即更新DOM?</p><p>Vue <a href="https://cn.vuejs.org/v2/guide/reactivity.html#%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E9%98%9F%E5%88%97">异步更新队列</a></p><blockquote><p>Vue 在更新 DOM 时是异步执行的。只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更。<br>如果同一个 watcher 被多次触发，只会被推入到队列中一次。<br>这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作是非常重要的。然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。</p></blockquote><p>从Vue文档解释 再重新来 理解 这段代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.dialogVisible = <span class="literal">true</span></span><br><span class="line"><span class="built_in">this</span>.form.user = <span class="string">&#x27;55555&#x27;</span></span><br></pre></td></tr></table></figure><p>先把 弹窗弹出</p><p>这个时候 Dialog 在初始化显示（此时并不能获取form），dom 没有完全更新完毕</p><p>然后 执行了 给form 赋值动作，<br>form这个时候并没有渲染，还未初始化（那么就相当于 form 的初始默认值是  ‘55555’）<br>全部初始化后 弹框内 form 表单默认值是 有了  ‘5555’，但是关闭的时候这个值并没有被清空<br><code>this.$refs.form.resetFields()</code>  也执行了</p><p>这是因为 element的form <code>resetFields()</code>方法<br>这个方法 还原了 form 的默认值，默认值就是我们赋值的 ‘5555’</p><p>因为我们没有在 dom完全更新后 去赋新的值，element-form 没有初始化，我们赋新的值 ‘5555’ 自然是 默认值</p><p><code>this.$refs.form.resetFields()</code> 自然还原了”默认值”</p><p>小结</p><p><code>this.$nextTick</code> 保证了数据更新后DOM完全渲染完毕后，数据，视图的正确性，要善于利用</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> element-form </tag>
            
            <tag> $nextTick </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>target=&#39;_blank&#39; 安全漏洞</title>
      <link href="2019/09/16/target=_blank/"/>
      <url>2019/09/16/target=_blank/</url>
      
        <content type="html"><![CDATA[<p>不知道有没有人跟我一样 打开一个网站喜欢 <code>ctrl + shift + i</code> 😀 不过有时候会发现 a 标签 加了一些东西</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;xxx&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;nofollow noopener noreferrer&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>先解释一下 a 标签 <code>rel</code> 属性是什么意思 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/a">引用MDN</a></p><blockquote><p>该属性指定了目标对象到链接对象的关系。该值是空格分隔的列表类型值。</p></blockquote><ul><li><code>noreferrer</code> 阻止浏览器跳到另一个页面时，通过HTTP头，发送当前页面的名字或其他值，以及把当前页设为另一个页面的引用(另一个页面的referrer值 )</li><li><code>noopener</code> 单击链接时隐藏引用者信息 阻止打开不受信任的链接时 以确保它们不会通过 <code>window.opener</code> (<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/opene">返回打开当前窗口的那个窗口的引用</a>) 属性篡改原始文档</li><li><code>nofollow</code> 表示本文档的作者不想宣传链接的文档，例如，它是不受控的，它是一个坏的例子或如果它们有商业关系（销售环节）。nofollow主要是被一些使用人气排名技术的搜索引擎所使用</li></ul><p>ok 为什么要用这个呢<br>想一下 如果你的网站内 有其他网站链接的时候，有时候 新页面白了一下就没了，原页面发现不见了 变成了其他网站。 很可能是 中了钓鱼网站<br>如果新打开的tab 页面没有关闭，它会持续的保持对原页面的访问权，这样一来别人就可以做很多事情</p><p>在用户点击到钓鱼链接后 <strong>主要是由用户发布的链接</strong> 攻击者可以通过使用 <code>window.opener.location</code> 强迫用户的前一个页面跳转到钓鱼页面，欺骗用户在钓鱼页面上登录，窃取用户口令。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.b.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>http://www.b.com<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- b.com下的页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (opener) &#123;</span></span><br><span class="line"><span class="javascript">      opener.window.location.href=<span class="string">&quot;https://google.com&quot;</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>有些高版本浏览器已修复这个bug 但是 为了确保安全建议所有站外链接全部添加 <code>nofollow noopener noreferrer</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> web安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>填字游戏</title>
      <link href="2018/04/01/%E5%A1%AB%E5%AD%97%E6%B8%B8%E6%88%8F/"/>
      <url>2018/04/01/%E5%A1%AB%E5%AD%97%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<p>起初是公司一个小游戏，从立项到开发完成大概5天吧，因为时间有些赶，最开始写的并不是很好，画字格用的是 table。<br>UI上面小小出入，跟一个朋友说做这个项目后，朋友建议我用 <a href="https://www.pixijs.com/">pixijs</a>，利用闲暇时间重写了一遍，下面是源码</p><a id="more"></a><h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;time-container&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">time</span> <span class="attr">id</span>=<span class="string">&quot;time&quot;</span>&gt;</span>00:00<span class="tag">&lt;/<span class="name">time</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;game-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;game&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;500&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span>&gt;</span>初始化中...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tips-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;fl&quot;</span>&gt;</span>提示：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;tips&quot;</span> <span class="attr">class</span>=<span class="string">&quot;oh&quot;</span>&gt;</span>赫拉利将告诉你人类是如何从动物变成上帝<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;game-input&quot;</span> <span class="attr">id</span>=<span class="string">&quot;game-input&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;game-input-send&quot;</span>&gt;</span>确认<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">&quot;zepto&quot;</span>, <span class="string">&quot;pixi&quot;</span>, <span class="string">&quot;modal&quot;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">$, pixi, modal</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 游戏基础配置</span></span><br><span class="line">  modal.pupup(&#123;</span><br><span class="line">    content: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;!-- &lt;img src=&quot;http://sunday90.cn/upload/2500872220b52768dd9c4e237579f8bc.jpg&quot; /&gt; --&gt;</span></span><br><span class="line"><span class="string">      &lt;a href=&quot;javascript:;&quot; class=&quot;btn start-btn&quot;&gt;开始计时&lt;/a&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    mask: <span class="literal">true</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">layero</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> that = <span class="built_in">this</span>;</span><br><span class="line">      $(layero).on(<span class="string">&quot;click&quot;</span>, <span class="string">&quot;.start-btn&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;开始游戏&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> time = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#time&quot;</span>);</span><br><span class="line">        Countdown.start(<span class="number">0.2</span>, time, <span class="function"><span class="keyword">function</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(time);</span><br><span class="line">        &#125;);</span><br><span class="line">        that.close();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> ua = <span class="built_in">window</span>.navigator.userAgent.toLocaleLowerCase();</span><br><span class="line">  <span class="keyword">const</span> device = &#123;</span><br><span class="line">    ios: <span class="regexp">/iphone/g</span>.test(ua),</span><br><span class="line">    android: <span class="regexp">/android/g</span>.test(ua)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> unit_size = &#123; <span class="attr">width</span>: <span class="number">50</span>, <span class="attr">height</span>: <span class="number">50</span> &#125;;</span><br><span class="line">  <span class="keyword">const</span> table = &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">10</span> &#125;;</span><br><span class="line">  <span class="keyword">const</span> gameContainer = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.game-container&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> mask = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.mask&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> input = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#game-input&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> tipsEl = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#tips&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> fontStyle = <span class="keyword">new</span> PIXI.TextStyle(&#123;</span><br><span class="line">    fontFamily:</span><br><span class="line">      <span class="string">&#x27;-apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif&#x27;</span>,</span><br><span class="line">    fontSize: <span class="number">28</span>,</span><br><span class="line">    fontWeight: <span class="string">&quot;500&quot;</span>,</span><br><span class="line">    fill: [<span class="string">&quot;#333&quot;</span>] <span class="comment">// gradient</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> time = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#time&quot;</span>);</span><br><span class="line">  <span class="comment">// 需要渲染的方格二维数组</span></span><br><span class="line">  <span class="keyword">const</span> unit_data = [</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">0</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">0</span>, <span class="attr">x</span>: <span class="number">5</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">0</span>, <span class="attr">x</span>: <span class="number">6</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">0</span>, <span class="attr">x</span>: <span class="number">7</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">0</span>, <span class="attr">x</span>: <span class="number">8</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">1</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">1</span>, <span class="attr">x</span>: <span class="number">3</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">1</span>, <span class="attr">x</span>: <span class="number">8</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">2</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">3</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">4</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">6</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">7</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">8</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">3</span>, <span class="attr">x</span>: <span class="number">3</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">3</span>, <span class="attr">x</span>: <span class="number">7</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">4</span>, <span class="attr">x</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">4</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">4</span>, <span class="attr">x</span>: <span class="number">2</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">4</span>, <span class="attr">x</span>: <span class="number">3</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">4</span>, <span class="attr">x</span>: <span class="number">6</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">4</span>, <span class="attr">x</span>: <span class="number">7</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">4</span>, <span class="attr">x</span>: <span class="number">8</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">4</span>, <span class="attr">x</span>: <span class="number">9</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">5</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">5</span>, <span class="attr">x</span>: <span class="number">7</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">6</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">6</span>, <span class="attr">x</span>: <span class="number">4</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">6</span>, <span class="attr">x</span>: <span class="number">5</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">6</span>, <span class="attr">x</span>: <span class="number">6</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">6</span>, <span class="attr">x</span>: <span class="number">7</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">7</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">7</span>, <span class="attr">x</span>: <span class="number">4</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">8</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">8</span>, <span class="attr">x</span>: <span class="number">2</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">8</span>, <span class="attr">x</span>: <span class="number">3</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">8</span>, <span class="attr">x</span>: <span class="number">4</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">9</span>, <span class="attr">x</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">y</span>: <span class="number">9</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// tips</span></span><br><span class="line">  <span class="keyword">const</span> tips = &#123;</span><br><span class="line">    <span class="string">&quot;21222324&quot;</span>: <span class="string">&quot;赫拉利将告诉你人类是如何从动物变成上帝&quot;</span>,</span><br><span class="line">    <span class="string">&quot;40414243&quot;</span>: <span class="string">&quot;对两次世界大战的哲学思考，直面存在的危机&quot;</span>,</span><br><span class="line">    <span class="string">&quot;81828384&quot;</span>: <span class="string">&quot;看萧红写的这书名还以为是一条河的历史&quot;</span>,</span><br><span class="line">    <span class="string">&quot;9091&quot;</span>: <span class="string">&quot;鲁迅先生的短篇小说集，里面有《狂人日记》&quot;</span>,</span><br><span class="line">    <span class="string">&quot;64656667&quot;</span>: <span class="string">&quot;天下合久必分，分久必合&quot;</span>,</span><br><span class="line">    <span class="string">&quot;46474849&quot;</span>: <span class="string">&quot;与达尔文《物种起源论》及哥白尼《天体运行论》并称为人类三大思想革命的经典之作&quot;</span>,</span><br><span class="line">    <span class="string">&quot;262728&quot;</span>: <span class="string">&quot;三位艺术天才的非凡人生，罗曼罗兰著&quot;</span>,</span><br><span class="line">    <span class="string">&quot;5678&quot;</span>: <span class="string">&quot;证明你上过中学的又一个有力佐证，冰心奶奶如是说&quot;</span>,</span><br><span class="line">    <span class="string">&quot;11121&quot;</span>: <span class="string">&quot;我们都是故事外的人——阿尔贝·加缪&quot;</span>,</span><br><span class="line">    <span class="string">&quot;13233343&quot;</span>: <span class="string">&quot;一种追求简单生活的价值观&quot;</span>,</span><br><span class="line">    <span class="string">&quot;415161718191&quot;</span>: <span class="string">&quot;余华手下一本关于记忆的长篇小说&quot;</span>,</span><br><span class="line">    <span class="string">&quot;647484&quot;</span>: <span class="string">&quot;走遍万水千山，泪尽撒哈拉&quot;</span>,</span><br><span class="line">    <span class="string">&quot;2737475767&quot;</span>: <span class="string">&quot;达康书记别低头，皇冠会掉&quot;</span>,</span><br><span class="line">    <span class="string">&quot;81828&quot;</span>: <span class="string">&quot;中国四大名著之一&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建 12 * 8 的方格</span></span><br><span class="line">  <span class="keyword">const</span> unit = []; <span class="comment">// 所有单元格 二维数组</span></span><br><span class="line">  <span class="keyword">const</span> unit_block = []; <span class="comment">// 需要渲染的单元格</span></span><br><span class="line">  <span class="keyword">const</span> selectUnit = &#123; <span class="attr">isRow</span>: <span class="literal">true</span>, <span class="attr">unit</span>: [] &#125;; <span class="comment">// 选中后的单元格</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建材质</span></span><br><span class="line">  <span class="keyword">const</span> unitTexture = PIXI.Texture.fromImage(<span class="string">&quot;./assets/images/unit.svg&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> unitBlockTexture = PIXI.Texture.fromImage(</span><br><span class="line">    <span class="string">&quot;./assets/images/unit-block.svg&quot;</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> unitBlockActiveTexture = PIXI.Texture.fromImage(</span><br><span class="line">    <span class="string">&quot;./assets/images/unit-block-active.svg&quot;</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建舞台</span></span><br><span class="line">  <span class="keyword">const</span> container = <span class="keyword">new</span> PIXI.Container();</span><br><span class="line">  container.x = <span class="number">0</span>;</span><br><span class="line">  container.y = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 倒计时</span></span><br><span class="line">  <span class="keyword">const</span> Countdown = &#123;</span><br><span class="line">    <span class="function"><span class="title">down</span>(<span class="params">callBack, success</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.Interval);</span><br><span class="line">      callBack(</span><br><span class="line">        success === <span class="literal">true</span> ? <span class="built_in">this</span>.countTime * <span class="number">60</span> - <span class="built_in">this</span>.time / <span class="number">1000</span> : <span class="string">&quot;时间结束&quot;</span></span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">check</span>(<span class="params">v</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (v &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;0&quot;</span> + v;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">start</span>(<span class="params">time, el, callBack</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.countTime = time;</span><br><span class="line">      <span class="keyword">var</span> endDate = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() + time * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">      <span class="built_in">this</span>.Interval = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.time = endDate - <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.time &lt;= <span class="number">0</span>) <span class="built_in">this</span>.down(callBack);</span><br><span class="line">        <span class="keyword">var</span> m = <span class="built_in">parseInt</span>((<span class="built_in">this</span>.time / <span class="number">1000</span> / <span class="number">60</span>) % <span class="number">60</span>, <span class="number">10</span>);</span><br><span class="line">        <span class="keyword">var</span> s = <span class="built_in">parseInt</span>((<span class="built_in">this</span>.time / <span class="number">1000</span>) % <span class="number">60</span>, <span class="number">10</span>);</span><br><span class="line">        <span class="keyword">var</span> ms = <span class="built_in">parseInt</span>(<span class="built_in">this</span>.time % <span class="number">1000</span>, <span class="number">10</span>);</span><br><span class="line">        el.innerText = <span class="built_in">this</span>.check(m) + <span class="string">&quot;:&quot;</span> + <span class="built_in">this</span>.check(s);</span><br><span class="line">      &#125;, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// es7</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    initGame();</span><br><span class="line">  &#125;, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">initGame</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">await</span> (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        mask.classList.add(<span class="string">&quot;mask-in&quot;</span>);</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          resolve();</span><br><span class="line">        &#125;, <span class="number">300</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建画布</span></span><br><span class="line">    <span class="keyword">const</span> app = <span class="keyword">new</span> PIXI.Application(</span><br><span class="line">      table.x * unit_size.width,</span><br><span class="line">      table.y * unit_size.height,</span><br><span class="line">      &#123;</span><br><span class="line">        backgroundColor: <span class="number">0xf1c16c</span>,</span><br><span class="line">        antialias: <span class="literal">true</span>,</span><br><span class="line">        view: <span class="built_in">document</span>.querySelector(<span class="string">&quot;#game&quot;</span>),</span><br><span class="line">        resolution: <span class="built_in">window</span>.devicePixelRatio</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">    app.stage.interactive = <span class="literal">true</span>;</span><br><span class="line">    app.stage.addChild(container);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 绘制表格</span></span><br><span class="line">    creatTable(table, unit_data, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">await</span> (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            mask.innerText = <span class="string">&quot;初始化完成,祝您玩的开心&quot;</span>;</span><br><span class="line">            resolve();</span><br><span class="line">          &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        mask.classList.add(<span class="string">&quot;mask-out&quot;</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;初始化完成&quot;</span>);</span><br><span class="line">      &#125;, <span class="number">500</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">creatTable</span>(<span class="params">table, block, callBack</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> row = table.x;</span><br><span class="line">    <span class="keyword">let</span> col = table.y;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> width = unit_size.width * table.x * unit_size.width;</span><br><span class="line">    <span class="keyword">let</span> height = unit_size.width * table.y * unit_size.height;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; row) &#123;</span><br><span class="line">      unit.push([]);</span><br><span class="line">      <span class="keyword">let</span> k = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">while</span> (k &lt; col) &#123;</span><br><span class="line">        <span class="keyword">let</span> sprite = <span class="keyword">new</span> PIXI.Sprite(unitTexture);</span><br><span class="line">        <span class="keyword">let</span> unitContainer = <span class="keyword">new</span> PIXI.Container();</span><br><span class="line">        <span class="keyword">let</span> x = (k * unit_size.width) % width;</span><br><span class="line">        <span class="keyword">let</span> y = (i * unit_size.height) % height;</span><br><span class="line">        sprite.interactive = <span class="literal">true</span>;</span><br><span class="line">        sprite.isDown = <span class="literal">false</span>;</span><br><span class="line">        sprite.isEmpty = <span class="literal">true</span>;</span><br><span class="line">        sprite.anchor.set(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        sprite.width = unit_size.width;</span><br><span class="line">        sprite.height = unit_size.height;</span><br><span class="line">        sprite.index = index++; <span class="comment">// 唯一id</span></span><br><span class="line">        unitContainer.width = unit_size.width;</span><br><span class="line">        unitContainer.height = unit_size.height;</span><br><span class="line">        unitContainer.x = x;</span><br><span class="line">        unitContainer.y = y;</span><br><span class="line">        sprite.x = <span class="number">0</span>;</span><br><span class="line">        sprite.y = <span class="number">0</span>;</span><br><span class="line">        sprite.X = x / unit_size.width; <span class="comment">// x坐标</span></span><br><span class="line">        sprite.Y = y / unit_size.height; <span class="comment">// y 坐标</span></span><br><span class="line">        unit[i].push(sprite);</span><br><span class="line">        unitContainer.addChild(sprite);</span><br><span class="line">        container.addChild(unitContainer);</span><br><span class="line">        k++;</span><br><span class="line">      &#125;</span><br><span class="line">      i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加事件</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> row = <span class="number">0</span>, uLen = unit.length; row &lt; uLen; row++) &#123;</span><br><span class="line">      add: <span class="keyword">for</span> (<span class="keyword">let</span> col = <span class="number">0</span>, len = unit[row].length; col &lt; len; col++) &#123;</span><br><span class="line">        <span class="comment">// console.log(unit[row][col].x / unit_size.width, unit[row][col].y / unit_size.height);</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>, fLen = block[row].length; k &lt; fLen; k++) &#123;</span><br><span class="line">          <span class="keyword">if</span> (block[row][k].x === col &amp;&amp; block[row][k].y === row) &#123;</span><br><span class="line">            unit[row][col].isEmpty = <span class="literal">false</span>;</span><br><span class="line">            unit[row][col].texture = unitBlockTexture;</span><br><span class="line">            unit[row][col].buttonMode = <span class="literal">true</span>;</span><br><span class="line">            unit[row][col].on(<span class="string">&quot;tap&quot;</span>, onClick);</span><br><span class="line">            unit_block.push(unit[row][col]);</span><br><span class="line">            <span class="keyword">continue</span> add;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 绘制边框</span></span><br><span class="line">    drawBorder(table, unit_data, container);</span><br><span class="line">    <span class="keyword">typeof</span> callBack === <span class="string">&quot;function&quot;</span> ? callBack() : <span class="keyword">void</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">onClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    input.focus();</span><br><span class="line">    <span class="keyword">const</span> X = <span class="built_in">this</span>.X,</span><br><span class="line">      Y = <span class="built_in">this</span>.Y;</span><br><span class="line">    <span class="keyword">let</span> cols = [],</span><br><span class="line">      rows = unit[Y];</span><br><span class="line">    <span class="comment">// 重置默认</span></span><br><span class="line">    reset(unit_block);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.isDown = !<span class="built_in">this</span>.isDown;</span><br><span class="line">    unit.forEach(<span class="function"><span class="params">row</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (row[X].X === X) cols.push(row[X]);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.selectRow !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.isDown &amp;&amp; <span class="built_in">this</span>.selectRow) &#123;</span><br><span class="line">        renderCol(X, Y, cols, rows);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        renderRow(X, Y, rows, cols);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.isDown) &#123;</span><br><span class="line">        renderRow(X, Y, rows, cols);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        renderCol(X, Y, cols, rows);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> key = selectUnit.unit.reduce(<span class="function">(<span class="params">total, unit</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> total + unit.index.toString();</span><br><span class="line">    &#125;, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    tipsEl.innerText = tips[key];</span><br><span class="line">    <span class="built_in">console</span>.log(key);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 渲染行</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">renderRow</span>(<span class="params">x, y, row, col</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> unit = aroundUnit(row, x, y, <span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">let</span> len = unit.length;</span><br><span class="line">    <span class="comment">// 如果临近元素为为空 (1 代表自身) 渲染列</span></span><br><span class="line">    <span class="keyword">if</span> (len &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">      renderCol(x, y, col, row);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    unit.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      item.texture = unitBlockActiveTexture;</span><br><span class="line">      item.selectRow = <span class="literal">true</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> storUnit = stor(unit);</span><br><span class="line">    selectUnit.isRow = <span class="literal">true</span>;</span><br><span class="line">    selectUnit.unit = storUnit;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 渲染列</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">renderCol</span>(<span class="params">x, y, col, row</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> unit = aroundUnit(col, x, y, <span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">let</span> len = unit.length;</span><br><span class="line">    <span class="comment">// 如果临近元素为空 (1 代表自身) 渲染行</span></span><br><span class="line">    <span class="keyword">if</span> (len &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">      renderRow(x, y, row, col, <span class="literal">true</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    unit.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      item.texture = unitBlockActiveTexture;</span><br><span class="line">      item.selectRow = <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> storUnit = stor(unit);</span><br><span class="line">    selectUnit.isRow = <span class="literal">false</span>;</span><br><span class="line">    selectUnit.unit = storUnit;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取相邻元素  arry 一维数组 行 或者 列</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">aroundUnit</span>(<span class="params">arry, x, y, selectRow</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = selectRow ? x : y;</span><br><span class="line">    <span class="keyword">let</span> len = arry.length;</span><br><span class="line">    <span class="keyword">let</span> unit = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arry[n + i] &amp;&amp; arry[n + i].isEmpty) <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">if</span> (arry[n + i]) &#123;</span><br><span class="line">        unit.push(arry[n + i]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arry[n - i] &amp;&amp; arry[n - i].isEmpty) <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">if</span> (arry[n - i]) unit.push(arry[n - i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> unit;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 重置视图</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reset</span>(<span class="params">unit</span>) </span>&#123;</span><br><span class="line">    unit.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      item.isDown = <span class="literal">false</span>;</span><br><span class="line">      item.texture = unitBlockTexture;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 排序</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">stor</span>(<span class="params">unit</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">property</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value1 = a[property];</span><br><span class="line">        <span class="keyword">var</span> value2 = b[property];</span><br><span class="line">        <span class="keyword">return</span> value1 - value2;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> unit.sort(compare(<span class="string">&quot;index&quot;</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">drawBorder</span>(<span class="params">table, block, ctx</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> row = table.x,</span><br><span class="line">      col = table.y;</span><br><span class="line">    <span class="keyword">let</span> containerWidth = row * unit_size.width,</span><br><span class="line">      containerHeight = col * unit_size.height;</span><br><span class="line">    <span class="keyword">let</span> startY = unit_size.height,</span><br><span class="line">      startX = unit_size.width;</span><br><span class="line">    drawLine(</span><br><span class="line">      &#123; <span class="attr">width</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="number">0xb38743</span>, <span class="attr">alpha</span>: <span class="number">1</span> &#125;,</span><br><span class="line">      ctx,</span><br><span class="line">      containerWidth,</span><br><span class="line">      containerHeight,</span><br><span class="line">      startX,</span><br><span class="line">      startY,</span><br><span class="line">      row,</span><br><span class="line">      col</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 绘制线条</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">drawLine</span>(<span class="params">lineStyle, ctx, width, height, X, Y, col, row</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">1</span>,</span><br><span class="line">      n = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> graphics = <span class="keyword">new</span> PIXI.Graphics();</span><br><span class="line">    <span class="comment">// 绘制行</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt; row) &#123;</span><br><span class="line">      graphics.beginFill();</span><br><span class="line">      graphics.lineStyle(lineStyle.width, lineStyle.color, lineStyle.alpha);</span><br><span class="line">      graphics.moveTo(<span class="number">0</span>, Y * i);</span><br><span class="line">      graphics.lineTo(width, Y * i);</span><br><span class="line">      graphics.endFill();</span><br><span class="line">      ctx.addChild(graphics);</span><br><span class="line">      i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 绘制列</span></span><br><span class="line">    <span class="keyword">while</span> (n &lt; col) &#123;</span><br><span class="line">      graphics.beginFill();</span><br><span class="line">      graphics.lineStyle(lineStyle.width, lineStyle.color, lineStyle.alpha);</span><br><span class="line">      graphics.moveTo(X * n, <span class="number">0</span>);</span><br><span class="line">      graphics.lineTo(X * n, height);</span><br><span class="line">      graphics.endFill();</span><br><span class="line">      ctx.addChild(graphics);</span><br><span class="line">      n++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 解决键盘遮住 输入框</span></span><br><span class="line"></span><br><span class="line">  $(<span class="built_in">document</span>).on(<span class="string">&quot;focus&quot;</span>, <span class="string">&quot;input&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(</span><br><span class="line">      () =&gt; &#123;</span><br><span class="line">        <span class="comment">// this.scrollIntoViewIfNeeded(false);</span></span><br><span class="line">        <span class="built_in">this</span>.scrollIntoView(&#123;</span><br><span class="line">          block: <span class="string">&quot;end&quot;</span>,</span><br><span class="line">          behavior: <span class="string">&quot;smooth&quot;</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      device.ios ? <span class="number">200</span> : <span class="number">0</span></span><br><span class="line">    );</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 输入</span></span><br><span class="line">  $(<span class="string">&quot;.input-container&quot;</span>).on(<span class="string">&quot;click&quot;</span>, <span class="string">&quot;.game-input-send&quot;</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> value = $.trim(input.value);</span><br><span class="line">    <span class="keyword">if</span> (value.length &gt; selectUnit.unit.length) &#123;</span><br><span class="line">      modal.toast(<span class="string">`最大可输入字数为<span class="subst">$&#123;selectUnit.unit.length&#125;</span>个`</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> param = selectUnit.unit.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        value: value.charAt(index),</span><br><span class="line">        x: item.X,</span><br><span class="line">        y: item.Y,</span><br><span class="line">        index: item.index</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(param);</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      $.ajax(&#123;</span><br><span class="line">        <span class="keyword">async</span>: <span class="literal">true</span>,</span><br><span class="line">        type: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">        url: <span class="string">&quot;./game.php&quot;</span>,</span><br><span class="line">        data: &#123; <span class="attr">data</span>: param &#125;,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (data.status === <span class="string">&quot;0&quot;</span>) &#123;</span><br><span class="line">            modal.toast(<span class="string">&quot;填错了哦&quot;</span>);</span><br><span class="line">            input.value = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            resolve(<span class="literal">false</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resolve(<span class="literal">true</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        error: <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(err);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!flag) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    [...value].forEach(<span class="function">(<span class="params">chart, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (selectUnit.unit[index].parent.children.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        selectUnit.unit[index].parent.children.forEach(<span class="function">(<span class="params">sprite, i</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (sprite.type === <span class="string">&quot;text&quot;</span>) sprite.text = chart;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> richText = <span class="keyword">new</span> PIXI.Text(chart, fontStyle);</span><br><span class="line">      richText.type = <span class="string">&quot;text&quot;</span>;</span><br><span class="line">      richText.anchor.set(<span class="number">0.5</span>);</span><br><span class="line">      richText.x = selectUnit.unit[index].parent.width / <span class="number">2</span>;</span><br><span class="line">      richText.y = selectUnit.unit[index].parent.height / <span class="number">2</span>;</span><br><span class="line">      selectUnit.unit[index].parent.addChild(richText);</span><br><span class="line">      <span class="comment">// container.addChild(richText);</span></span><br><span class="line">    &#125;);</span><br><span class="line">    input.value = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h2><p>后端就比较容易了,前端传每一个字格 id 以及值，后端验证字格 id 值 就行了</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span>: Edward</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Date</span>: 2018-05-02 23:27:31</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Last</span> Modified by: Edward</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Email</span>: 809537981<span class="doctag">@qq</span>.com</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Last</span> Modified time: 2018-05-03 16:26:08</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">header(<span class="string">&#x27;Content-Type:application/json; charset=utf-8&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$post</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;data&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$data</span> = [</span><br><span class="line">  <span class="string">&#x27;1&#x27;</span> =&gt; <span class="string">&#x27;局&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;11&#x27;</span> =&gt; <span class="string">&#x27;外&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;5&#x27;</span> =&gt; <span class="string">&#x27;繁&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;6&#x27;</span> =&gt; <span class="string">&#x27;星&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;7&#x27;</span> =&gt; <span class="string">&#x27;春&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;8&#x27;</span> =&gt; <span class="string">&#x27;水&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;13&#x27;</span> =&gt; <span class="string">&#x27;极&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;33&#x27;</span> =&gt; <span class="string">&#x27;主&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;18&#x27;</span> =&gt; <span class="string">&#x27;浒&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;21&#x27;</span> =&gt; <span class="string">&#x27;人&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;22&#x27;</span> =&gt; <span class="string">&#x27;类&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;23&#x27;</span> =&gt; <span class="string">&#x27;简&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;24&#x27;</span> =&gt; <span class="string">&#x27;史&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;28&#x27;</span> =&gt; <span class="string">&#x27;传&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;27&#x27;</span> =&gt; <span class="string">&#x27;人&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;26&#x27;</span> =&gt; <span class="string">&#x27;名&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;37&#x27;</span> =&gt; <span class="string">&#x27;民&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;46&#x27;</span> =&gt; <span class="string">&#x27;梦&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;47&#x27;</span> =&gt; <span class="string">&#x27;的&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;57&#x27;</span> =&gt; <span class="string">&#x27;名&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;48&#x27;</span> =&gt; <span class="string">&#x27;解&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;49&#x27;</span> =&gt; <span class="string">&#x27;析&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;64&#x27;</span> =&gt; <span class="string">&#x27;三&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;65&#x27;</span> =&gt; <span class="string">&#x27;国&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;66&#x27;</span> =&gt; <span class="string">&#x27;演&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;67&#x27;</span> =&gt; <span class="string">&#x27;义&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;67&#x27;</span> =&gt; <span class="string">&#x27;义&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;74&#x27;</span> =&gt; <span class="string">&#x27;毛&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;81&#x27;</span> =&gt; <span class="string">&#x27;呼&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;82&#x27;</span> =&gt; <span class="string">&#x27;兰&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;83&#x27;</span> =&gt; <span class="string">&#x27;河&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;84&#x27;</span> =&gt; <span class="string">&#x27;传&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;40&#x27;</span> =&gt; <span class="string">&#x27;存&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;41&#x27;</span> =&gt; <span class="string">&#x27;在&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;42&#x27;</span> =&gt; <span class="string">&#x27;主&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;43&#x27;</span> =&gt; <span class="string">&#x27;义&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;51&#x27;</span> =&gt; <span class="string">&#x27;细&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;61&#x27;</span> =&gt; <span class="string">&#x27;雨&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;71&#x27;</span> =&gt; <span class="string">&#x27;中&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;81&#x27;</span> =&gt; <span class="string">&#x27;呼&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;90&#x27;</span> =&gt; <span class="string">&#x27;呐&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;91&#x27;</span> =&gt; <span class="string">&#x27;喊&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="variable">$flag</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$post</span> <span class="keyword">as</span> <span class="variable">$index</span> =&gt; <span class="variable">$arry</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$data</span>[<span class="variable">$arry</span>[<span class="string">&#x27;index&#x27;</span>]] == <span class="variable">$arry</span>[<span class="string">&#x27;value&#x27;</span>]) &#123;</span><br><span class="line">    <span class="variable">$flag</span> = <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable">$flag</span> = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$flag</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;&#123;&quot;status&quot;: &quot;1&quot;&#125;&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;&#123;&quot;status&quot;: &quot;0&quot;&#125;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://img.vim-cn.com/0a/89da71d940ba601c661bd509805bc804efc762.gif" class="lazyload" data-srcset="http://img.vim-cn.com/0a/89da71d940ba601c661bd509805bc804efc762.gif" srcset="data:image/png;base64,666" alt="收工"><br>收工~</p>]]></content>
      
      
      <categories>
          
          <category> pixijs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小游戏 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
